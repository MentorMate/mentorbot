<div class="split left">
    <div>
        <mat-tree [dataSource]="dataSource" [treeControl]="treeControl">

            <mat-tree-node class="node" *matTreeNodeDef="let node;" matTreeNodePadding>
                <div class="node-content">
                    <button *ngIf="!node.content" class="icon-button node-element-height center-ed" mat-icon-button
                            matTreeNodeToggle
                            [attr.aria-label]="'toggle ' + node.filename">
                        <mat-icon class="mat-icon-rtl-mirror">
                            {{treeControl.isExpanded(node) ? 'indeterminate_check_box_icon' : 'add_box'}}
                        </mat-icon>
                    </button>
                    <div class="center-ed node-element-height center-ed" draggable="true" (dragend)="handleDragEnd($event)"
                         ondrop="handleDropEvent($event)">
                        {{node.item}}
                    </div>
                    <button class="icon-button node-element-height center-ed" *ngIf="!node.editMode" mat-icon-button
                            (click)="editItem(node)">
                        <p class="blue-text">Edit</p>
                    </button>
                </div>
                <div class="short">
                    <span *ngIf="node.content" class="well well-sm">{{node.content}}</span>
                    <span *ngFor="let trait of node.acquireTraits" class="badge badge-success">{{trait}}</span>
                    <span *ngFor="let trait of node.requiredTraits" class="badge badge-danger">{{trait}}</span>
                </div>
            </mat-tree-node>
        </mat-tree>
        <button class="icon-button" mat-icon-button (click)="addNewItem()">
            Add
        </button>

        <a (click)="save()">SAVE</a>
    </div>
</div>

<div *ngIf="editedNode" class="split right">
    <app-edit-question [nodeExists]="nodeExists" [editedNode]="editedNode" [saveButtonIsNotValid]="saveButtonIsNotValid"
                       (deleteTraitEvent)="deleteTrait($event)"
                       (addTraitEvent)="addTrait($event)" (deleteParentEvent)="deleteParent($event)"
                       (typeEvent)="changeEditNodeIsAnswer($event)" (titleEvent)="updateTitle($event)"
                       (contentEvent)="updateContent($event)" (saveEvent)="saveNode()" (cancelEvent)="cancelEdit()"
                       (deleteEvent)="deleteQuestion()" (dragOverEvent)="addParent = true" (dragLeaveEvent)="addParent = false">
    </app-edit-question>
</div>